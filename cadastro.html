<!-- Parte do Buru - Criacao da parte de cadastro do cliente
   -->

<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üìÅ CADASTRO_CLIENTE</title>
</head>

<body>
    <form onsubmit="event.preventDefault();trataform()">

        <label for="id">üî∏-ID:</label>
        <input type="text" id="id" name="id">

        <label for="nome">üë§-NOME:</label>
        <input type="text" id="nome" name="id">

        <label for="nome">üë§-SOBRENOME:</label>
        <input type="text" id="sobrenome" name="id">

        <label for="nome">üè¢-NOME DA EMPRESA:</label>
        <input type="text" id="empresa" name="id">

        <input type="submit" value="Cadastrar">

    </form>
    <script>
        async function trataform() {
            const inputId = document.getElementById("id")
            const inputNome = document.getElementById("nome")
            const inputSobrenome = document.getElementById("sobrenome")
            const inputEmpresa = document.getElementById("empresa")
            const id = inputId.value
            const nome = inputNome.value

            const objCliente = {
                id: id,
                nome: nome,
                sobrenome: sobrenome,
                empresa: empresa
            }
            try {
            const resposta = await fetch("http://localhost:8000/clientes", {
                headers: {
                    'Content-Type': 'application/json'
                },
                method: "POST",
                body: JSON.stringify(objCliente)
            })

            if(resposta.status===200){
                alert("Cliente cadastrado com sucesso! ‚úÖ")
            }

            
            if(resposta.status===400){
                const dados = await resposta.json ()
                alert(`‚ùå ERRO DO LADO DO BACKEND: "\n ${dados.mensagem}`)
            }
            
            
            if(resposta.status===404){
                alert("‚ùå ERRO N√ÉO IDENTIFICADO ‚ùì")
            }
            

        }catch (erro){
            alert ("‚ùå ERRO: Erro na requisi√ß√£o do fetch\n" + "Voc√™ ligou o BACKEND com npm run dev?")
        }
    }
    

    </script>
</body>

</html>